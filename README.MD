# QuickStock ‚Äì Sistema de Gesti√≥n de Inventario en PHP (MVC)

QuickStock es una aplicaci√≥n web modular desarrollada bajo el patr√≥n **Modelo-Vista-Controlador (MVC)**, dise√±ada para facilitar la gesti√≥n eficiente de inventario en entornos escalables, seguros y mantenibles. El sistema permite separar la l√≥gica de negocio, la presentaci√≥n y el control de flujo, garantizando una arquitectura clara, reutilizable y preparada para evoluci√≥n funcional.

---

## Tareas

Para ver la **Estructura Completa de Tareas y Pendientes**, visita nuestro [Tablero Kanban aqu√≠ ‚û°Ô∏è](.kanbn/index.md).

---

## Inicio r√°pido

Este repositorio corresponde al sistema QuickStock, una aplicaci√≥n web modular desarrollada en PHP bajo el patr√≥n MVC. Su estructura est√° dise√±ada para facilitar la mantenibilidad, escalabilidad y claridad t√©cnica en entornos de desarrollo profesional.

Para conocer el flujo de trabajo, convenciones internas y recomendaciones de implementaci√≥n, consulta el [manual del desarrollador](/src/docs/manual_desarrollador.md).

---

## Caracter√≠sticas Principales

QuickStock ofrece funcionalidades completas para la gesti√≥n de inventario y ventas:

### üìä M√≥dulo de Reportes

- **Generaci√≥n de Reportes Din√°micos**: Ventas, Inventario, Rotaci√≥n de Productos y Financiero
- **Exportaci√≥n a PDF**: Reportes profesionales con mPDF 8.2
- **Filtrado Avanzado**: Por rango de fechas y sucursal
- **Visualizaci√≥n HTML**: Vista previa en pantalla antes de exportar

### üè™ Gesti√≥n de Inventario

- Control de stock por sucursal
- Categorizaci√≥n de productos
- Alertas de stock m√≠nimo
- Historial de movimientos

### üí∞ Punto de Venta

- Registro de ventas r√°pido
- M√∫ltiples m√©todos de pago
- Gesti√≥n de clientes
- Facturaci√≥n autom√°tica

### üë• Gesti√≥n de Personal

- Control de empleados por sucursal
- Roles y permisos
- Historial de actividades

---

## Tecnolog√≠as Principales

El proyecto est√° construido con un stack moderno y enfocado en la seguridad y la modularidad.

| Componente     | Versi√≥n / Prop√≥sito                   |
| :------------- | :------------------------------------ |
| **PHP**        | 8.0+ (POO, modularidad)               |
| **PostgreSQL** | 12+ (Base de datos relacional)        |
| **Composer**   | Gesti√≥n de dependencias y autoloading |
| **Bootstrap**  | 5 (Estilos y dise√±o responsivo)       |
| **mPDF**       | 8.2+ (Generaci√≥n de PDFs)             |
| **Apache**     | Reescritura de URLs con `.htaccess`   |
| **OpenSSL**    | Encriptaci√≥n de datos sensibles       |

---

## üöÄ Instalaci√≥n y Configuraci√≥n

Sigue estos pasos detallados para desplegar el proyecto en tu entorno local.

### Prerrequisitos

- **XAMPP / LAMP / WAMP**: Servidor web Apache y PHP 8.0+.
- **PostgreSQL 12+**: Motor de base de datos.
- **Composer**: Gestor de dependencias de PHP.
- **Git**: Control de versiones.

---

### 1. Preparaci√≥n del Entorno (Windows/XAMPP)

1.  Navega a la carpeta p√∫blica de tu servidor web (usualmente `htdocs` en XAMPP).
2.  Crea la estructura de carpetas recomendada para mantener el orden:

```powershell
cd C:\xampp\htdocs
mkdir DEV\PHP
cd DEV\PHP
```

---

### 2. Clonar el Proyecto

Clona el repositorio dentro de la carpeta creada:

```powershell
git clone https://github.com/Rafa-x64/QuickStock-Inventory-Management-System-in-PHP.git
cd QuickStock
```

---

### 3. Gesti√≥n de Dependencias (Composer)

QuickStock utiliza **Composer** para gestionar librer√≠as cr√≠ticas como `mPDF` (generaci√≥n de reportes) y para el autocarga de clases (autoloading).

**Es obligatorio instalar las dependencias antes de ejecutar el proyecto:**

1.  Abre una terminal en la ra√≠z del proyecto (`.../QuickStock/`).
2.  Ejecuta el comando de instalaci√≥n:

```bash
composer install
```

> **¬øQu√© hace esto?**
>
> - Descarga las librer√≠as definidas en `composer.json` a la carpeta `vendor/`.
> - Genera el archivo `vendor/autoload.php`, necesario para que PHP encuentre las clases del proyecto autom√°ticamente. sin esto, el sistema arrojar√° errores de "Class not found".

---

### 4. Configuraci√≥n de Base de Datos (PostgreSQL)

El sistema utiliza PostgreSQL. Sigue estos pasos estrictamente para evitar errores de conexi√≥n.

#### Paso A: Habilitar Extensiones en XAMPP

Para que `Composer` pueda instalar librer√≠as como `mpdf` (que requiere motor de im√°genes **GD**) o `phpmailer`, y para que el sistema conecte con la base de datos, es **OBLIGATORIO** habilitar las siguientes extensiones en PHP.

1.  Abre el **Panel de Control de XAMPP**.
2.  En la fila de **Apache**, haz clic en el bot√≥n `Config` > `PHP (php.ini)`.
3.  Se abrir√° un archivo de texto. Presiona `Ctrl + B` y busca estas l√≠neas:
    ```ini
    ;extension=gd
    ;extension=pdo_pgsql
    ;extension=pgsql
    ```
4.  **Descom√©ntalas** quitando el punto y coma (`;`) al inicio, para que queden as√≠:
    ```ini
    extension=gd
    extension=pdo_pgsql
    extension=pgsql
    ```
5.  Guarda el archivo y **Reinicia el m√≥dulo Apache** en XAMPP (Stop -> Start).

#### Paso B: Importar la Base de Datos con pgAdmin

Usaremos la funci√≥n de "Restaurar" para asegurar la integridad de la estructura.

1.  Abre **pgAdmin 4**.
2.  Crea la base de datos:
    - Click derecho en `Databases` > `Create` > `Database...`.
    - Nombre: `QuickStock`.
    - Guardar.
3.  Restaura el esquema:
    - Click derecho sobre la nueva base de datos `QuickStock`.
    - Selecciona **Restore** (Restaurar).
    - En **Filename**, selecciona el archivo ubicado en: `.../QuickStock/src/config/quickstock.sql`.
    - Ve a la pesta√±a **Data/Objects** (u Opciones Avanzadas dependiendo de tu versi√≥n) y aseg√∫rate de asignar el **Role name** a `postgres`.
    - Haz clic en **Restore**.

#### Paso C: Verificar la Base de Datos

Para confirmar que todo est√° bien:

1.  Haz clic derecho en la base de datos `QuickStock` > **Query Tool**.
2.  Ejecuta esta consulta de prueba:
    ```sql
    SELECT * FROM core.sucursal;
    ```
3.  Si no da error y muestra resultados (o una tabla vac√≠a con columnas), ¬°est√°s listo!

### 5. Configurar Credenciales (SERVER.php)

Finalmente, conecta el sistema con tu base de datos local.

1.  Ve a la carpeta `src/config/` y abre el archivo `SERVER.php`.
2.  Verifica y edita las credenciales:

```php
// src/config/SERVER.php
const DB_SERVER = "localhost";
const DB_NAME = "QuickStock";
const DB_USER = "postgres";  // Usuario por defecto de PG
const DB_PASS = "postgres";  // ‚ö†Ô∏è TU CONTRASE√ëA REAL AQU√ç
```

> **Nota Cr√≠tica:** Si tu contrase√±a de PostgreSQL no es "postgres", c√°mbiala en `DB_PASS` o el sistema no conectar√°.

---

### 6. Verificar Servidor Web (Apache)

Para que el enrutamiento amigable (URLs limpias) funcione, Apache debe tener habilitado el m√≥dulo `mod_rewrite` y permitir la lectura del archivo `.htaccess`.

- En XAMPP, aseg√∫rate de iniciar el servicio **Apache**.
- Accede al proyecto desde tu navegador:
  `http://localhost/DEV/PHP/QuickStock/src/`

---

## Estructura del Proyecto (MVC)

El n√∫cleo del sistema sigue el patr√≥n **Modelo-Vista-Controlador (MVC)**, garantizando la separaci√≥n de responsabilidades:

| Carpeta       | Rol dentro del MVC    | Descripci√≥n                                                                  |
| :------------ | :-------------------- | :--------------------------------------------------------------------------- |
| `controller/` | **Controlador (C)**   | Gestiona el flujo de la aplicaci√≥n e invoca las vistas seg√∫n la URL.         |
| `model/`      | **Modelo (M)**        | L√≥gica de negocio, conexi√≥n a la base de datos, encriptaci√≥n y validaciones. |
| `view/`       | **Vista (V)**         | Archivos de presentaci√≥n: HTML, CSS, JS y plantilla base.                    |
| `assets/`     | **Recursos visuales** | Bootstrap, componentes, im√°genes, iconos y elementos PHP reutilizables.      |
| `shared/`     | **L√≥gica compartida** | Traits PHP reutilizables entre modelos y controladores.                      |
| `config/`     | **Configuraci√≥n**     | Constantes globales, credenciales y script de base de datos.                 |
| `docs/`       | **Documentaci√≥n**     | Manuales t√©cnicos, changelog, estructura y diagramas del sistema.            |

### Referencia a estructura del proyecto

> [Estructura del proyecto](src/docs/estructura_proyecto.md)

---

## üèóÔ∏è Arquitectura H√≠brida (MVC + Client-Server)

QuickStock implementa dos patrones de arquitectura que conviven para ofrecer una experiencia moderna y robusta:

### 1. MVC Tradicional (Navegaci√≥n)

Utilizado para la carga de vistas, gesti√≥n de sesiones y renderizado de plantillas HTML.

- **Front Controller**: `src/index.php` gestiona todas las rutas amigables.
- **Vistas**: Renderizadas desde el servidor con PHP.

### 2. Cliente-Servidor (API RESTful)

Utilizado para la interactividad din√°mica sin recargas de p√°gina (AJAX/Fetch).

- **Cliente (Frontend)**: Archivos JS en `src/api/client/` consumen la API.
- **Servidor (Backend)**: Endpoints en `src/api/server/index.php` procesan solicitudes JSON y responden datos estructurados.

**Flujo de Datos:**
`Vista (JS)` ‚û°Ô∏è `Fetch (JSON)` ‚û°Ô∏è `API (PHP)` ‚û°Ô∏è `Base de Datos` ‚û°Ô∏è `Respuesta JSON` ‚û°Ô∏è `DOM Update`

---

## Contribuci√≥n

**¬°Las contribuciones son bienvenidas!** Para colaborar en el desarrollo:

1.  Clona el repositorio y crea una rama a partir de `master`:

```bash
git checkout -b feature/nombre-funcionalidad
```

2.  Sigue las **Convenciones de Desarrollo**.
3.  Aseg√∫rate de que tus cambios pasen las pruebas.
4.  Realiza un `commit` descriptivo y abre un **Pull Request (PR)**.

```bash
git add .
git commit -m "commit descriptivo"
```

5. Borrar la rama que creaste luego de hacer pull request con:

```bash
git branch -D feature/nombre-funcionalidad
```

### Referencia a Guia de contribucion

> [Contributing.md](src/docs/Contributing.md)

---

## Seguridad

La seguridad es una prioridad. Por favor, aseg√∫rate de:

- Usar siempre **consultas preparadas (PDO)** para interactuar con la base de datos.
- **Hashear contrase√±as** con `password_hash`.
- **No modificar** archivos cr√≠ticos como `config/SERVER` o `.htaccess`.

---

## Licencia

Este proyecto est√° bajo la Licencia **MIT** - ver el archivo [LICENSE.md](src/docs/LICENSE.MD) para m√°s detalles.
